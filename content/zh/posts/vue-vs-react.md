---
title: Vue.js 相较于 React 的不足之处
modifiedAt: 2023-07-15T15:47:19+09:00
createdAt: 2023-05-25T16:46:18+09:00
tags: [Vue, React]
---

我对 Vue.js 这个前端框架天生有着好感。这是我的第一款前端框架，甚至此前我都没有用过 Javascript。Vue.js 拥有完善的中文文档，让一无所知的我也能快速入门前端。如今，我依旧喜欢它的直观性、易用性以及优雅的设计。

然而 Vue 并不是全球范围内的第一选择，这个世界上还存在着一个名为 React 的怪物，它是事实上的前端第一库，前途一片光明，无人能够撼动它的地位。可怕的是，Vue 和 React 都是为了解决同一个问题（如何更好地编写 UI）而存在的，它们是可以互相替代的工具。

虽然我不是什么高级前端工程师，我对这两个库的底层只有文档上的粗浅了解，而没有深入底层。但我对两个框架/库都有一点点使用经验，也算是一个熟练使用者。我很想向大家分享我在使用这些库时的一些经验和体会。希望能帮助到一些仍在抉择的初学者。

## Vue 的优点，和 React 的不足之处

我们可以很明显地看到 Vue 的开发者对改善开发体验（DX）的努力。Vue 有双向绑定，有各种工具组合式函数的自动导入以及语法糖。Vue 团队做得更多。Vue 内置的 Transition 比 React 生态下野生的第三方 Transition 库要好用一万倍。官方也会下场把常用的开发工具作为 Module 集成到 Vue 中去，让项目保持简洁，让我们能够专注于业务逻辑。Vue 和 Nuxt 下核心团队成员还维护了酷炫的 devtools，比传统的浏览器插件的开发体验好了很多。

我想说所有这些 Vue 魔法都是为了提高写业务代码的效率而存在的，而代价只是一点点查阅文档的成本，我认为是值得的。相较之下，React 的功能更加纯粹，然而想要做好并不简单。如果你想掌握 React 的最佳编程范式，可就得一个一个坑趟过去了。许多时候，Hook 的行为并不是那么符合直觉，从而带给人更多的“心智负担”。我们不仅要查看文档，还需要去寻找其他开发者总结的各种经验教训，光是一个 `useEffect` 就有无数人写了许多长篇大论教你怎么使用。

带有动画效果的复杂前端交互逻辑，想用 React hook 来实现其实比较困难，开发者经常无法成功获取最新的视图状态，很难准确把握视图更新的生效时机。Hook 的使用也有各种限制。而这一切归结于 React 的设计哲学——组件可以执行多次。我在 React 项目开发时，有时感觉比起在各种 use 迷宫中游走，选择使用纯粹的 DOM API 来完成一些想要的效果要简单得多，尽管这有时会导致虚拟 DOM 和真实 DOM 不一致。而 Vue 在这方面有时体感上比 React 更容易理解。

另外有人觉得 Vue 对 Typescript 的支持不好，所以敬而远之。可我却觉得，在不开发库的情况下，在业务开发的情景下，Vue 真的不是特别需要 Typescript。不使用 Typescript 的 Vue 程序在易用度和严谨性方面有足够的平衡。况且如今的 Vue 的 Typescript 支持并没有那么不堪。

## React 的优点，和 Vue 的不足之处

相较于 Vue，React 是一个走在前面的框架。这里的走在前面是两方面的：一方面是， React 的生态更好。

其实生态和用户数量是个相辅相成的东西。用户多了，自然搞什么的都有。也自然，自然发现的 Bug 和被解决的 Bug 也会更多，功能也就更加稳定。这么评价一个库，其实对 Vue 并不公平。不仅仅是 Vue 这个框架好不好用影响着一切（当然这也是很重要的一部分）。这也和时机或宣传有关。React 光是一个 Facebook 背书，可能就能吸引更多的人来开发。

正是因为有这么多的开发者，React 的生态百花齐放。有三种 CSS in JS 方案、好几种状态管理库、若干种路由策略。有人觉得这要逼死选择困难症，不像 Vue，官方已经把全家桶维护好了，生态非常统一。没错，这确实是 Vue 的优点之一。我发现 Vue 的优点是核心团队成员维护的周边项目都做得很棒，而 React 团队成员搞的都不了了之。然而，React 的优势在于，除了核心团队之外，还有更多优秀的团队在做更有意思的东西，并且完成得很好。

比如，React 世界现有了 Redux，Vue 世界才出现了 Vuex。React 世界更早拥有了 React Query 这种 SWR 库，Vue 下更晚并且功能更少。Next 和 Nuxt，印象中推出时间似乎差不多，但 Next 远远比 Nuxt 更加成熟。

Vue 下的组件库方案虽然远好于其他框架，但比起 React 还有很大的不足。在 Vue 2 的时代，我试用过 Element UI，然后迁移到了 Vuetify，而我不建议新的项目在任何情况下使用它们，即使它们的 Star 数比我所有项目加起来都多得多，但难用就是难用，更新慢就是更新慢，使用体验上就是被 Material UI、Mantine 之类的 React 框架吊打。另外做的比较好的可能是 Naive UI？但这几乎是一个个人项目。React 世界中有 Remix 这种无头方案，还有 shadcn 这种比较奇葩的方案，而 Vue 世界里更多的是灵感来自于 Remix、shadcn 等等。

除此上述常用的库方面，React 中还有 Remotion 这样的视频制作解决方案，还有 Framer motion 这样的顶级 FLIP 动画方案（虽然 FLIP 这个词我第一次还是在 vue 的文档中看到的）。一句话来总结就是，Vue 在生态方面只能说是“够用”，而 React 确实称得上是 “丰富”。

追随 Vue 的人会说，如果你想要这个功能，你可以自己写一个，开源项目人人都可以贡献。但我们为什么要在世界上已经有 React 可供选择的时候，为 Vue 环境再开发一套用起来差不多的东西呢？仅仅是为了向 Vue 生态做贡献，这个动机可能并不够。特别是有些库执行难度很大，比如 React Native 目前在 Vue 生态下没有替代品（Weex 已经凉了，并且从未火过），这样的复杂的库让个人牵头去开发几乎是不可能的，可以预见的未来，也许 Vue 不会有野生团队去维护这样的东西。我不想说这么消极的话，但是生态上，Vue 很难追上 React。就算 Vue 有一个新的概念，也更快被抄到 React 生态下，或许还能做得更好。而反过来却难以让我有所期待。

另一个“走在前面”体现在 React 本身的思想似乎更加超前。比如，React Hook 是 React 框架的一个核心特性，它使得函数组件可以具有和类组件同样的状态和生命周期。然后才有了 Vue 的组合式 API，实现了类似的关注点分离，并对原有的 Vue 开发者保持友好性。

再加上最近 Next.js 13 的推出，服务器组件已经能够投入使用。有人觉得服务器组件似乎像是回到了 php 的时代，但是了解过或使用过的人应该能感受到，服务器组件是先进的，未来是光明的。就像 SWR 技术能一定程度上干掉 Redux/Vuex 一样，服务器组件的推行能或许能够改变前端，埋葬 SPA 应用程序，埋葬 SWR。甚至我觉得作为一个 Vuer，应该现在开始进行服务器组件相关的研发或准备，就像是曾经拥抱了 Typescript，又拥抱了类似 Hook 的组合式 API 一样。不要被舆论绑架，不去模仿——别人好的东西，我也要让我的用户用上，我认为这是理所应当的。

另外一个我心中 Vue 的缺点，则是单文件组件。一个文件只能放一个组件，说实话有一些不太方便。特别是有一些小的、相关的组件时，需要在各自的 `.vue` 文件中定义它们可能会显得有些冗余。这常常导致一个项目中的文件数量迅速增长，特别是在大型项目中，这可能会使文件结构显得更加复杂，使得寻找和管理特定的组件变得困难。

另外，虽然 Vue 的单文件组件在应用开发中非常方便，但在库或框架开发中就不是那么一回事了。如果去看一些组件库的实现，会发现它们常常会使用 JSX/TSX，或是渲染函数，这其实是比较尴尬的，这说明模板的表现力也许真的很弱，复杂的功能不是很好实现。Vue 和 JSX 支持的特性不一样，编程体验非常不统一。我对在 Vue 中使用 JSX 有一些抵触，因为这好像不是官方推荐的方案，在说明文档里也只有短短的一章，用 Vue 的人本身就不多，用 Vue 的 JSX 更少，也许，坑会很多。

说实话，React 官方推荐 Next 作为开发方案，而 Nuxt 也将成为 Vue 的首选生产环境开发方案。因此 Nuxt 值得重视。Nuxt 现在处于一个百废待兴的状态。你会在各种各样的地方遇到 Bug，我这几天浅试了一下 Nuxt 建博客，就遇到了一堆问题：替换默认 Image 样式会有 Bug，设置页面转移动画，动画执行时点击其他链接会有 Bug，使用 content 插件的话，文章的路径文件夹居然不能包括大写字母，导致无法使用 zh-CN 这样的路径的 Bug，从 Content 返回，主页，标题没有改变回来的 Bug，ViewTransiton 在同一页面上跳转会有卡死几秒的 Bug……你可以发现这里的许多功能是 Next.js 没有的—— Nuxt 做得更多，所以更容易出错。不过好在看到好解决的可以随手提出，会很快得到回复。短短两个周末我已经在 Nuxt 项目中合并了 4 个 PR，成为了 “nuxter”。

## 总结

虽然有点像反串，但我真的这么觉得：在世界上最热门的框架，和第二热门的框架（之一）之中进行选择，也许选择第二热门的会更好。第一个理由是，这个领域 React 是当之无愧的 Top 1，其实许多人只是因为 Top 1 比较出名才选择了它。而拒绝 Top 1 选择 Top2 终究是要带点热爱的，说明它是真的有独到之处，等待着被你发现。第二个理由是，当你愿意给开源项目做贡献时，你会发现给 Vue 生态添砖加瓦比给 React 提意见反馈明显得多。一方面，生态上值得去做的东西很多。因为许多用 React 实现的小的功能都可以用 Vue 实现，并且实现得可能还更快。

总结起来，我认为 Vue 比起 React 仍有许多不足。因此我会建议在生产环境中，更优先选择 React，考虑到它的灵活性，成熟的生态系统，以及高效的开发模式。但在个人学习的旅程中，如果你有足够的热情和精力，那么完全可以尝试 Vue，它有着足够的影响力，你可以让它变得更好。
